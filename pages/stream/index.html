<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Стрим - СайтСотика Premium</title>
    <script src="../../_sdk/element_sdk.js"></script>
    <script src="../../_sdk/data_sdk.js" type="text/javascript"></script>
    <link rel="stylesheet" href="../../css/style.css">
</head>
<body class="h-full">
    <a id="home"></a>
<header class="header">
    <div class="header__inner">
        <div class="brand"><span class="logo" id="logo-text">S</span> <span class="title" id="title-text">СайтСотика</span>
        </div>
        <nav class="nav" id="desktop-nav"><a href="/" class="nav-link">Главная</a> <a href="/pages/about-me" class="nav-link">Обо мне</a> <a href="/pages/games" class="nav-link">Игры</a> <a href="/pages/stream" class="nav-link active">Стрим</a> <a href="/pages/team" class="nav-link">Команда</a> <a href="/pages/partners" class="nav-link">Партнеры</a>
        </nav><button class="menu-toggle" id="menu-toggle" aria-label="Меню"> <span></span> <span></span> <span></span> </button>
    </div>
</header>
<nav class="mobile-nav" id="mobile-nav"><a href="/" class="nav-link">Главная</a> <a href="/pages/about-me" class="nav-link">Обо мне</a> <a href="/pages/games" class="nav-link">Игры</a> <a href="/pages/stream" class="nav-link active">Стрим</a> <a href="/pages/team" class="nav-link">Команда</a> <a href="/pages/partners" class="nav-link">Партнеры</a>
</nav>
<main class="content">
    <section style="width:100%; margin:0; padding:0; display:flex; justify-content:center;">

        <!-- ЧИСТЫЙ HUD-КОНТЕЙНЕР -->
        <div style="
        position: relative;
        width: 100%;
        max-width: 1600px;
        aspect-ratio: 16/9;
        background: transparent;
        border-radius: 12px;
        overflow: visible;
    ">

            <!-- HUD-ЭЛЕМЕНТЫ (ПРИМЕРЫ) -->

            <!-- Последний донат будет добавлен динамически через JS -->

            <!-- Новая подписка -->
            <div style="
            position:absolute;
            top:20px;
            left:20px;
            background:rgba(0,0,0,0.45);
            padding:12px 18px;
            border-radius:8px;
            color:#fff;
            font-size:18px;
            border:1px solid var(--primary);
            pointer-events:none;
        ">
                Новая подписка: <strong>username123</strong>
            </div>

            <!-- HUD: Цель с премиальным оранжевым прогресс-баром -->
            <div style="
    position:absolute;
    bottom:20px;
    left:50%;
    transform:translateX(-50%);
    background:rgba(0,0,0,0.45);
    padding:14px 20px;
    border-radius:10px;
    color:#fff;
    font-size:18px;
    border:1px solid var(--primary);
    width:420px;
    pointer-events:none;
">

                <!-- Заголовок цели -->
                <div style="
        font-size:17px;
        margin-bottom:8px;
        text-align:center;
    ">
                    Цель: Новый микрофон
                </div>

                <!-- Прогресс-бар -->
                <div style="
        width:100%;
        height:14px;
        background:rgba(255,255,255,0.12); /* мягкий светлый фон */
        border-radius:7px;
        overflow:hidden;
        margin-bottom:8px;
    ">
                    <div style="
            width:64%; /* процент выполнения */
            height:100%;
            background:#f59e0b; /* ОРАНЖЕВАЯ ПОЛОСА */
            border-radius:7px;
        "></div>
                </div>

                <!-- Текст прогресса -->
                <div style="
        font-size:15px;
        text-align:center;
        opacity:0.9;
    ">
                    Собрано: 3200₽ / 5000₽ (64%)
                </div>

            </div>
            </div>


    </section>




    <footer class="footer">
        <div class="footer-content">
            <div class="ai-credit"><strong>ℹ️ Информация о сайте:</strong><br>
                Этот сайт создан с помощью искусственного интеллекта, но <strong>все ошибки я исправляю сам</strong>. Если вы заметили проблему — напишите мне в группу ВК, я всё устраню!
            </div>
            <div class="footer-buttons"><a href="https://vk.com/siteofsotik" target="_blank" rel="noopener noreferrer" class="footer-btn"> ВК СайтСотика </a> <a href="#home" onclick="window.scrollTo({top: 0, behavior: 'smooth'}); return false;" class="footer-btn"> Стрим </a>
            </div>
            <div class="footer-divider"></div>
            <div class="footer-credit">
                © 2024 СайтСотика • Дмитрий Переднего
            </div>
        </div>
        <div class="footer-iconTop">
            <a href="#home" onclick="window.scrollTo({top: 0, behavior: 'smooth'}); return false;"><i class='bx bx-up-arrow-alt'></i></a>
        </div>
    </footer>
</main>
<script>
    const menuToggle = document.getElementById('menu-toggle');
    const mobileNav = document.getElementById('mobile-nav');
    const mobileLinks = mobileNav.querySelectorAll('.nav-link');

    menuToggle.addEventListener('click', () => {
        menuToggle.classList.toggle('active');
        mobileNav.classList.toggle('active');
        document.body.style.overflow = mobileNav.classList.contains('active') ? 'hidden' : '';
    });

    mobileLinks.forEach(link => {
        link.addEventListener('click', () => {
            menuToggle.classList.remove('active');
            mobileNav.classList.remove('active');
            document.body.style.overflow = '';
        });
    });

    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && mobileNav.classList.contains('active')) {
            menuToggle.classList.remove('active');
            mobileNav.classList.remove('active');
            document.body.style.overflow = '';
        }
    });

    const defaultConfig = {
        site_title: 'СайтСотика',
        logo_text: 'S',
        primary_color: '#000000',
        font_family: 'Montserrat'
    };

    let config = { ...defaultConfig };

    async function onConfigChange(newConfig) {
        config = { ...config, ...newConfig };
        document.getElementById('logo-text').textContent = config.logo_text || defaultConfig.logo_text;
        document.getElementById('title-text').textContent = config.site_title || defaultConfig.site_title;
        document.documentElement.style.setProperty('--primary', config.primary_color || defaultConfig.primary_color);
        document.body.style.fontFamily = `${config.font_family || defaultConfig.font_family}, sans-serif`;
    }

    function mapToCapabilities(currentConfig) {
        return {
            recolorables: [{
                get: () => currentConfig.primary_color || defaultConfig.primary_color,
                set: (value) => {
                    currentConfig.primary_color = value;
                    window.elementSdk.setConfig({ primary_color: value });
                }
            }],
            borderables: [],
            fontEditable: {
                get: () => currentConfig.font_family || defaultConfig.font_family,
                set: (value) => {
                    currentConfig.font_family = value;
                    window.elementSdk.setConfig({ font_family: value });
                }
            },
            fontSizeable: undefined
        };
    }

    function mapToEditPanelValues(currentConfig) {
        return new Map([
            ['site_title', currentConfig.site_title || defaultConfig.site_title],
            ['logo_text', currentConfig.logo_text || defaultConfig.logo_text]
        ]);
    }

    if (window.elementSdk) {
        window.elementSdk.init({
            defaultConfig,
            onConfigChange,
            mapToCapabilities,
            mapToEditPanelValues
        });
    }
    // === Скрипт для случайного появления уведомления о донате ===
    const donationNotifications = [
        { name: 'Анна', amount: 200 },
        { name: 'Михаил', amount: 150 },
        { name: 'Елена', amount: 300 },
        { name: 'Дмитрий', amount: 100 },
        { name: 'Ольга', amount: 500 },
        { name: 'Иван', amount: 120 },
        { name: 'Катя', amount: 250 }
    ];

    const donationElement = document.createElement('div');
    donationElement.style.cssText = `
        position: absolute;
        top: 20px;
        right: 20px;
        background: rgba(0,0,0,0.6);
        padding: 12px 18px;
        border-radius: 8px;
        color: #fff;
        font-size: 18px;
        border: 1px solid var(--primary);
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.4s ease-in-out;
        z-index: 1000;
    `;
    donationElement.innerHTML = `Последний донат: <strong>Имя — 150₽</strong>`;
    document.querySelector('section').appendChild(donationElement);

    function showRandomDonation() {
        const randomDonation = donationNotifications[Math.floor(Math.random() * donationNotifications.length)];
        donationElement.innerHTML = `Последний донат: <strong>${randomDonation.name} — ${randomDonation.amount}₽</strong>`;
        
        // Показать
        donationElement.style.opacity = '1';
        
        // Скрыть через 4 секунды
        setTimeout(() => {
            donationElement.style.opacity = '0';
        }, 4000);
    }

    function scheduleNextDonation() {
        const nextTime = (Math.random() * (7 - 1) + 1) * 60 * 1000; // от 1 до 7 минут в мс
        setTimeout(() => {
            showRandomDonation();
            scheduleNextDonation(); // Запланировать следующее
        }, nextTime);
    }

    // Запускаем первый раз после первой минуты
    setTimeout(() => {
        showRandomDonation();
        scheduleNextDonation();
    }, 60 * 1000);
</script>
</body>
</html>